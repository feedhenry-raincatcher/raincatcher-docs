[id='{context}-con-workflow-step']
= Building Your First Workflow Step

Steps are internal part of the {PROJECT_NAME}.
Guide bellow describes structure of the step and some basic priciples required build it.
A basic knowledge of AngularJS is required to build a Workflow Step.

== Structure of a Step
Steps are divided into two linked categories, the `module` and the `definition`.

=== Module
Modules can contain one or more AngularJS directives for rendering _Steps_ in the Portal and Mobile applications.
{PROJECT_NAME} _Steps_ use AngularJS directives to build a user interface as part of workflows.
Each _Step_ is divided into two directives:

.A Step's Directive
|===
|Directive |Description

|Edit Section directive (Form)
|The Edit Section is displayed when a workflow is executed and allows users to edit information - typically this would be a form.

The Edit Section consists of the a html template and a directive.

|Preview Section directive (View)
|The Preview Section is displayed as a summary when a workflow has been completed.

The Preview Section consists of a html template and a directive.

|===

=== Definition

A Definition contains the _Step Definition_ which outlines the properties such as, the name and the description of a _Step_, for the workflow in the Portal application.
Each _Step_ requires a *Definition* and the `definition.json` file can contain a *Definition* of a single _Step_ or an array of *Definitions* with the size corresponding to the number of _Steps_ in the _Step Package_.
The following is an example of a *Definition*:

Example:
[source,json]
----
[
    {
        "code": "base-form",
        "name": "Base Form",
        "description": "base form used to for steps",
        "templates": {
            "form": "<base-form></base-form>",
            "view": "<base></base>"
        }
    }
]
----

The *Module* and the *Definition* are exported to be visibile when a _Step Package_ is imported.
The following is an example of a *Module*:

Example:
[source,javascript]
----
module.exports = {
  ngModule: require('./angular/base'),
  // Definition for this step that is being used in portal
  definition: require('./definition.json')
};
----

== Creating new step

A Step can be created manually from template or by using generator.

=== Generator

The Generator allows to generate step automatically by answering questions.
Generated step will contain sample UI directives that needs to be modified for users needs.

link:https://www.npmjs.com/package/generator-rcstep[generator-rcstep] npm package to create a _Step_.

=== Template

Alternatively developers can use provided step template:

When developing a custom _Step Package_, clone the link:https://github.com/feedhenry-raincatcher/step-template.git[step-template] repository and make modifications to the cloned repository.

=== Modifications

For more information about modifying a _Step_ and importing a _Step_ into the Portal and Mobile applications, see the link:https://github.com/feedhenry-raincatcher/step-template.git[README.md]

